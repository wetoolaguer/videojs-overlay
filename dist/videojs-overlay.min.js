/**
 * videojs-overlay
 * @version 2.1.0
 * @copyright 2018 Brightcove, Inc.
 * @license Apache-2.0
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],e):t.videojsOverlay=e(t.videojs)}(this,function(h){"use strict";h=h&&h.hasOwnProperty("default")?h.default:h;var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},n={align:"top-left",class:"",content:"This overlay will show up while the video is playing",debug:!1,showBackground:!0,attachToControlBar:!1,overlays:[{start:"playing",end:"paused"}]},e=h.getComponent("Component"),d=h.dom||h,o=h.registerPlugin||h.plugin,l=function(t){return"number"==typeof t&&t==t},u=function(t){return"string"==typeof t&&/^\S+$/.test(t)},r=function(o){function r(t,e){s(this,r);var n=a(this,o.call(this,t,e));return["start","end"].forEach(function(t){var e=n.options_[t];if(l(e))n[t+"Event_"]="timeupdate";else if(u(e))n[t+"Event_"]=e;else if("start"===t)throw new Error('invalid "start" option; expected number or string')}),["endListener_","rewindListener_","startListener_"].forEach(function(e){n[e]=function(t){return r.prototype[e].call(n,t)}}),"timeupdate"===n.startEvent_&&n.on(t,"timeupdate",n.rewindListener_),n.debug('created, listening to "'+n.startEvent_+'" for "start" and "'+(n.endEvent_||"nothing")+'" for "end"'),n.hide(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,o),r.prototype.createEl=function(){var t=this.options_,e=t.content,n=t.showBackground?"vjs-overlay-background":"vjs-overlay-no-background",o=d.createEl("div",{className:"\n        vjs-overlay\n        vjs-overlay-"+t.align+"\n        "+t.class+"\n        "+n+"\n        vjs-hidden\n      "});return"string"==typeof e?o.innerHTML=e:e instanceof i.DocumentFragment?o.appendChild(e):d.appendContent(o,e),o},r.prototype.debug=function(){if(this.options_.debug){for(var t=h.log,e=t,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];t.hasOwnProperty(o[0])&&"function"==typeof t[o[0]]&&(e=t[o.shift()]),e.apply(void 0,["overlay#"+this.id()+": "].concat(o))}},r.prototype.hide=function(){return o.prototype.hide.call(this),this.debug("hidden"),this.debug('bound `startListener_` to "'+this.startEvent_+'"'),this.endEvent_&&(this.debug('unbound `endListener_` from "'+this.endEvent_+'"'),this.off(this.player(),this.endEvent_,this.endListener_)),this.on(this.player(),this.startEvent_,this.startListener_),this},r.prototype.shouldHide_=function(t,e){var n=this.options_.end;return l(n)?n<=t:n===e},r.prototype.show=function(){return o.prototype.show.call(this),this.off(this.player(),this.startEvent_,this.startListener_),this.debug("shown"),this.debug('unbound `startListener_` from "'+this.startEvent_+'"'),this.endEvent_&&(this.debug('bound `endListener_` to "'+this.endEvent_+'"'),this.on(this.player(),this.endEvent_,this.endListener_)),this},r.prototype.shouldShow_=function(t,e){var n=this.options_.start,o=this.options_.end;return l(n)?l(o)?n<=t&&t<o:this.hasShownSinceSeek_?Math.floor(t)===n:(this.hasShownSinceSeek_=!0,n<=t):n===e},r.prototype.startListener_=function(t){var e=this.player().currentTime();this.shouldShow_(e,t.type)&&this.show()},r.prototype.endListener_=function(t){var e=this.player().currentTime();this.shouldHide_(e,t.type)&&this.hide()},r.prototype.rewindListener_=function(t){var e=this.player().currentTime(),n=this.previousTime_,o=this.options_.start,r=this.options_.end;e<n&&(this.debug("rewind detected"),l(r)&&!this.shouldShow_(e)?(this.debug("hiding; "+r+" is an integer and overlay should not show at this time"),this.hasShownSinceSeek_=!1,this.hide()):u(r)&&e<o&&(this.debug("hiding; show point ("+o+") is before now ("+e+") and end point ("+r+") is an event"),this.hasShownSinceSeek_=!1,this.hide())),this.previousTime_=e},r}(e);h.registerComponent("Overlay",r);var p=function(t){var s=this,a=h.mergeOptions(n,t);Array.isArray(this.overlays_)&&this.overlays_.forEach(function(t){s.removeChild(t),s.controlBar&&s.controlBar.removeChild(t),t.dispose()});var e=a.overlays;delete a.overlays,this.overlays_=e.map(function(t){var e=h.mergeOptions(a,t),n="string"==typeof e.attachToControlBar||!0===e.attachToControlBar;if(!s.controls()||!s.controlBar)return s.addChild("overlay",e);if(n&&-1!==e.align.indexOf("bottom")){var o=s.controlBar.children()[0];if(void 0!==s.controlBar.getChild(e.attachToControlBar)&&(o=s.controlBar.getChild(e.attachToControlBar)),o){var r=s.controlBar.addChild("overlay",e);return s.controlBar.el().insertBefore(r.el(),o.el()),r}}var i=s.addChild("overlay",e);return s.el().insertBefore(i.el(),s.controlBar.el()),i})};return p.VERSION="__VERSION__",o("overlay",p),p});